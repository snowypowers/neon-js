<html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Wallet · neon-js</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Wallet · neon-js"/><meta property="og:type" content="website"/><meta property="og:url" content="http://cityofzion.io/neon-js/index.html"/><meta property="og:description" content="The `wallet` module is exposed as:"/><link rel="shortcut icon" href="/neon-js/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/dracula.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/neon-js/css/main.css"/></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/neon-js/"><img class="logo" src="/neon-js/img/docusaurus.svg"/><h2 class="headerTitle">neon-js</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/neon-js/docs/en/installation.html" target="_self">Docs</a></li><li><a href="/neon-js/docs/en/api-index.html" target="_self">API</a></li><li><a href="/neon-js/en/help.html" target="_self">Help</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/neon-js/img/language.svg"/>English</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/neon-js/en">English</a></li><li><a href="/neon-js/zh-CN">中文</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(){
          if(languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Modules</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Overview</h3><ul><li class="navListItem"><a class="navItem" href="/neon-js/docs/en/api-index.html">API</a></li></ul></div><div class="navGroup navGroupActive"><h3>Modules</h3><ul><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/neon-js/docs/en/api-wallet.html">Wallet</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1>Wallet</h1></header><article><div><span><p>The <code>wallet</code> module is exposed as:</p>
<pre><code class="hljs css js"><span class="hljs-keyword">import</span> Neon <span class="hljs-keyword">from</span> <span class="hljs-string">'@cityofzion/neon-js'</span>
<span class="hljs-keyword">const</span> account = Neon.create.account(privateKey)
Neon.is.address(string)

<span class="hljs-keyword">import</span> {wallet} <span class="hljs-keyword">from</span> <span class="hljs-string">'@cityofzion/neon-js'</span>
<span class="hljs-keyword">const</span> account = <span class="hljs-keyword">new</span> wallet.Account(privateKey)
wallet.isAddress(string)
</code></pre>
<p>The <code>wallet</code> module contains the core methods for manipulating keys, creating signatures and verifying keys.</p>
<h3><a class="anchor" aria-hidden="true" name="account"></a><a href="#account" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Account</h3>
<pre><code class="hljs css ts"><span class="hljs-keyword">class</span> Account {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">str: <span class="hljs-built_in">string</span></span>)

  WIF: string
  privateKey: string
  publicKey: string
  scriptHash: string
  address: string

  getPublicKey(<span class="hljs-params">encoded: <span class="hljs-built_in">boolean</span></span>): string
  encrypt(<span class="hljs-params">keyphrase: <span class="hljs-built_in">string</span>, scryptParams?: ScryptParams</span>): Account
  decrypt(<span class="hljs-params">keyphrase: <span class="hljs-built_in">string</span>, scryptParams?: ScryptParams</span>): Account
  export(<span class="hljs-params"></span>): WalletAccount
}
</code></pre>
<p>The <code>Account</code> class is used to store and transform keys to its various formats. It can be instantiated with any key format and is smart enough to recognise the format and store it appropriately.</p>
<pre><code class="hljs css js">  <span class="hljs-keyword">import</span> Neon, {wallet} <span class="hljs-keyword">from</span> <span class="hljs-string">'@cityofzion/neon-js'</span>

  <span class="hljs-keyword">const</span> a = Neon.create.Account(<span class="hljs-string">'ALfnhLg7rUyL6Jr98bzzoxz5J7m64fbR4s'</span>)
  <span class="hljs-built_in">console</span>.log(a.address) <span class="hljs-comment">// ALfnhLg7rUyL6Jr98bzzoxz5J7m64fbR4s</span>

  <span class="hljs-keyword">const</span> b = <span class="hljs-keyword">new</span> wallet.Account(<span class="hljs-string">'9ab7e154840daca3a2efadaf0df93cd3a5b51768c632f5433f86909d9b994a69'</span>)
  <span class="hljs-built_in">console</span>.log(b.privateKey) <span class="hljs-comment">// 9ab7e154840daca3a2efadaf0df93cd3a5b51768c632f5433f86909d9b994a69</span>
</code></pre>
<p>The class enables us to easily retrieve keys in any derivable format without needing to remember any methods. However, we can only retrieve formats that can be derived from our input. For example, we cannot retrieve any formats other than address and scripthash from <code>a</code> because we instantiated it with an address. However, we can get any format from <code>b</code> because it was instantiated with a private key, which is the lowest level key available.</p>
<pre><code class="hljs css js">  <span class="hljs-built_in">console</span>.log(a.publicKey) <span class="hljs-comment">// throws an error</span>
  <span class="hljs-built_in">console</span>.log(b.publicKey) <span class="hljs-comment">// prints the public key</span>
  <span class="hljs-built_in">console</span>.log(b.address) <span class="hljs-comment">// prints the address</span>
</code></pre>
<p>The order of the keys are:</p>
<ol>
<li>encrypted (NEP2)</li>
<li>privateKey / WIF</li>
<li>publicKey</li>
<li>scriptHash</li>
<li>address</li>
</ol>
<p>When you instantiate a <code>Account</code> with a key, you can retrieve any format that is below it in the list. For example, if we instantiate with a public key, we can get the publc key, scriptHash and address but not the private key.</p>
<p>The Account class can only be instantiated from encrypted key, private key, public key, or address. ScriptHash is not accepted as there is currently no way to verify if a scripthash is legitimate.</p>
<p>The <code>encryptedKey</code> is special as it is the lowest level key but requires the user to unlock it first before we can derive anything from it. This can be done through the <code>decrypt</code> method.</p>
<pre><code class="hljs css js">  <span class="hljs-keyword">const</span> c = <span class="hljs-keyword">new</span> wallet.Account(<span class="hljs-string">'6PYLHmDf6AjF4AsVtosmxHuPYeuyJL3SLuw7J1U8i7HxKAnYNsp61HYRfF'</span>)
  <span class="hljs-built_in">console</span>.log(c.encrypted) <span class="hljs-comment">// encrypted key</span>
  <span class="hljs-built_in">console</span>.log(c.address) <span class="hljs-comment">// throws error</span>
  c.decrypt(<span class="hljs-string">'city of zion'</span>)
  <span class="hljs-built_in">console</span>.log(c.address) <span class="hljs-comment">// ALq7AWrhAueN6mJNqk6FHJjnsEoPRytLdW</span>
</code></pre>
<p>You can encrypt the key by using the <code>encrypt</code> method. This is necessary if you want to export this key to a JSON file.</p>
<pre><code class="hljs css js">  c.encrypt(<span class="hljs-string">'new password'</span>)
</code></pre>
<p>This action will encrypt the private key with the provided password and replace any old NEP2 key.</p>
<h3><a class="anchor" aria-hidden="true" name="balance"></a><a href="#balance" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Balance</h3>
<pre><code class="hljs css ts"><span class="hljs-keyword">class</span> Balance {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">bal?: Balance</span>)

  address: string
  net: 'MainNet' | 'TestNet'
  assetSymbols: string[]
  assets: { [index: <span class="hljs-built_in">string</span>]: AssetBalance }
  tokenSymbols: <span class="hljs-built_in">string</span>[]
  tokens: { [index: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">number</span> }

  <span class="hljs-keyword">static</span> <span class="hljs-keyword">import</span>(jsonString: <span class="hljs-built_in">string</span>): Balance

  addAsset(sym: <span class="hljs-built_in">string</span>, assetBalance?: AssetBalance): <span class="hljs-keyword">this</span>
  addToken(sym: <span class="hljs-built_in">string</span>, tokenBalance?: <span class="hljs-built_in">number</span> | Fixed8): <span class="hljs-keyword">this</span>
  applyTx(tx: Transaction, confirmed?: <span class="hljs-built_in">boolean</span>): <span class="hljs-keyword">this</span>
  <span class="hljs-keyword">export</span>(): <span class="hljs-built_in">string</span>
  verifyAssets(url: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;Balance&gt;
}
</code></pre>
<p>The Balance class stores the balance of the account. It is usually retrieved using a 3rd party API as NEO nodes do not have a RPC call to easily retrieve this information with a single call.</p>
<pre><code class="hljs css js"><span class="hljs-keyword">import</span> Neon <span class="hljs-keyword">from</span> <span class="hljs-string">'@cityofzion/neon-js'</span>
Neon.create.balance({<span class="hljs-attr">net</span>: <span class="hljs-string">'TestNet'</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'ALq7AWrhAueN6mJNqk6FHJjnsEoPRytLdW'</span>})

<span class="hljs-keyword">import</span> {wallet, api} <span class="hljs-keyword">from</span> <span class="hljs-string">'@cityofzion/neon-js'</span>
<span class="hljs-comment">// This form is useless as it is an empty balance.</span>
<span class="hljs-keyword">const</span> balance = <span class="hljs-keyword">new</span> wallet.Balance({<span class="hljs-attr">net</span>: <span class="hljs-string">'TestNet'</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'ALq7AWrhAueN6mJNqk6FHJjnsEoPRytLdW'</span>})
<span class="hljs-comment">// We get a useful balance that can be used to fill a transaction through api</span>
<span class="hljs-keyword">const</span> filledBalance = api.getBalanceFrom(<span class="hljs-string">'ALq7AWrhAueN6mJNqk6FHJjnsEoPRytLdW'</span>, api.neonDB)
<span class="hljs-comment">// This contains all symbols of assets available in this balance</span>
<span class="hljs-keyword">const</span> symbols = filledBalance.assetSymbols
<span class="hljs-comment">// We retrieve the unspent coins from the assets object using the symbol</span>
<span class="hljs-keyword">const</span> neoCoins = filledBalance.assets[<span class="hljs-string">'NEO'</span>].unspent
<span class="hljs-comment">// We can verify the information retrieved using verifyAssets</span>
filledBalance.verifyAssets(<span class="hljs-string">'https://seed1.neo.org:20332'</span>)
</code></pre>
<p>The class is used to track the unspent coins available to construct transactions with. <code>verifyAssets</code> is a handy method to make sure the unspent coins provided by the 3rd party API is really unspent by verifying them against a NEO node. However, this is an expensive operation so use sparingly.</p>
<p>The constructor is a handy method to convert a Balance-like javascript object into a <code>neon-js</code> Balance.</p>
<h3><a class="anchor" aria-hidden="true" name="claims"></a><a href="#claims" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Claims</h3>
<pre><code class="hljs css ts"><span class="hljs-keyword">class</span> Claims {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">claims?: Claims</span>)

  address: string
  net: string
  claims: ClaimItem[]
}
</code></pre>
<p>The Claims class is a collection of claims data belonging to an account. It is usually retrieved from a 3rd part API. We do not recommend you craft your own Claims manually. This class is here for completeness in terms of high level objects.</p>
<p>Like Balance, the constructor is the way to convert a Claims-like object into a <code>neon-js</code> Claims object. This is the primary method we use to convert the claims object we get from 3rd party API.</p>
<p>NEO generates GAS when held. When NEO is spent, the gas that it generates is unlocked and made claimable through ClaimTransaction. The formula for calcuating the claim per transaction is:</p>
<pre><code class="hljs">claim = ((start - end) * 8 + sysfee) * value
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="api-index.html">← API</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/neon-js/" class="nav-home"><img src="/neon-js/img/docusaurus.svg" alt="neon-js" width="66" height="58"/></a><div><h5>Docs</h5><a href="/neon-js/docs/en/getting-started.html">Getting Started</a><a href="/neon-js/docs/en/tutorial.html">Guides</a><a href="/neon-js/docs/en/api.html">API Reference</a></div><div><h5>Community</h5><a href="/neon-js/en/users.html">User Showcase</a><a href="https://neo.stackexchange.com/" target="_blank">Stack Overflow</a><a href="https://discord.gg/wczVXTN">Discord Chat</a><a href="https://www.reddit.com/r/NEO/" target="_blank">NEO Reddit</a></div><div><h5>More</h5><a href="https://github.com/cityofzion/neon-js" target="_blank">GitHub</a><a class="github-button" href="https://github.com/cityofzion/neon-js" data-icon="octicon-star" data-count-href="/cityofzion/neon-js/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="http://cityofzion.io" target="_blank" class="fbOpenSource"><img src="/neon-js/img/logo_med.png" alt="City of Zion" width="150" height="150"/></a><section class="copyright">Copyright © 2018 City of Zion</section></footer></div></body></html>